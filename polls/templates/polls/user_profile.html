{% extends 'base_generic.html' %}

{% block title %}–ü—Ä–æ—Ñ–∏–ª—å {{ profile_user.username }}{% endblock %}

{% block content %}
<div>
    <div style="display: flex; align-items: center; gap: 20px; margin-bottom: 20px;">
        <img src="{{ user_profile.avatar.url }}" alt="–ê–≤–∞—Ç–∞—Ä" style="width: 100px; height: 100px; border-radius: 50%;">
        <div>
            <h1>{{ profile_user.username }}</h1>
            {% if user_profile.bio %}
            <p>{{ user_profile.bio }}</p>
            {% endif %}

            {% if user == profile_user %}
        <a href="{% url 'polls:profile' %}">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</a>
        <a href="{% url 'polls:delete_profile' %}" class="btn btn-danger">–£–¥–∞–ª–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</a>
{% endif %}
        </div>
    </div>

    <hr>

    <h2>–ü–æ—Å—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h2>

    {% if user == profile_user %}
    <div style="margin-bottom: 20px;">
        <a href="{% url 'polls:create_post' %}" class="btn btn-success">–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø–æ—Å—Ç</a>
    </div>
    {% endif %}

    {% for post in page_obj %}
    <div style="border: 1px solid #ccc; padding: 15px; margin-bottom: 15px; border-radius: 5px;">
        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
            <small>{{ post.created_at|date:"d.m.Y H:i" }}</small>

            {% if user == post.author %}
            <div>
                <a href="{% url 'polls:edit_post' post.id %}" style="margin-right: 10px;">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                <a href="{% url 'polls:delete_post' post.id %}" style="color: red;">–£–¥–∞–ª–∏—Ç—å</a>
            </div>
            {% endif %}
        </div>

        <p>{{ post.content|linebreaks }}</p>

        <div style="display: flex; gap: 20px;">
            <span>‚ù§Ô∏è {{ post.likes_count }}</span>
            <span>üí¨ {{ post.get_comment_count }}</span>
        </div>
    </div>
    {% empty %}
    <p>–£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ–∫–∞ –Ω–µ—Ç –ø–æ—Å—Ç–æ–≤.</p>
    {% endfor %}

    <!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è -->
    <div style="margin-top: 20px;">
        {% if page_obj.has_previous %}
        <a href="?page=1">–ü–µ—Ä–≤–∞—è</a>
                <a href="?page={{ page_obj.previous_page_number }}">–ù–∞–∑–∞–¥</a>
        {% endif %}

        <span>–°—Ç—Ä–∞–Ω–∏—Ü–∞ {{ page_obj.number }} –∏–∑ {{ page_obj.paginator.num_pages }}</span>

        {% if page_obj.has_next %}
        <a href="?page={{ page_obj.next_page_number }}">–í–ø–µ—Ä–µ–¥</a>
        <a href="?page={{ page_obj.paginator.num_pages }}">–ü–æ—Å–ª–µ–¥–Ω—è—è</a>
        {% endif %}
    </div>
</div>
{% endblock %}